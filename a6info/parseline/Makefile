CC 	= gcc

CFLAGS  = -Wall -g -I$(LIBROOT)/include 

LD 	= $(CC)

LIBROOT = ../libmush

ifeq ($(MACHTYPE),x86_64)
        LIBPATH = $(LIBROOT)/lib64
else
        LIBPATH = $(LIBROOT)/lib
endif

LDFLAGS  = -g -L $(LIBPATH)

PROG    = parseline

OBJS	= main.o

SRCS	= main.c

HDRS	= longstr.o

LIBS 	= -lmush

EXTRACLEAN = parser.tab.? y.output $(PROG) 

all:
	$(MAKE) -C $(LIBROOT) all
	$(MAKE) $(PROG)

$(PROG): $(OBJS) $(LIBPATH)/libmush.a
	$(LD) $(LDFLAGS) -o $(PROG) $(OBJS) $(LIBS)

$(LIBPATH)/libmush.a:
	$(MAKE) -C $(LIBROOT)

allclean: clean
	rm -f $(EXTRACLEAN)
	$(MAKE) -C $(LIBROOT) allclean

clean:	
	rm -f $(OBJS) *~ TAGS

tags : $(SRCS) $(HDRS)
	etags $(SRCS) $(HDRS)  

test:	$(PROG)
	~/Class/cpe357/now/Asgn/Handin/lib/asgn5/testParseline


# These dependencies generated by makedepend, but cleaned up for
# portability
